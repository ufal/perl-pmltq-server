<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="PML-TQ Server infrastructure">
  <meta name="author" content="">

  <title><% if (title) { %><%= title %> &ndash; <% } %>PML-TQ Server</title>

  <!-- Bootstrap Core CSS -->
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">

  <!-- Toastr CSS -->
  <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />

  <!-- DataTables CSS -->
  <link href="//cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css" />

  <!-- Custom CSS -->
  <%= stylesheet '/css/pmltq-admin.css' %>

  <!-- Custom Fonts -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
  <div id="wrapper">
  <%= content 'header' %>
  <%= content 'body' %>
  <%= content 'footer' %>
  </div>
  <!-- /#wrapper -->
  <!-- jQuery Version 2.1.1 -->
  <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

  <!-- DataTables JavaScript -->
  <script src="//cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
  <script src="//cdn.datatables.net/plug-ins/725b2a2115b/integration/bootstrap/3/dataTables.bootstrap.js"></script>

<% if (session('flash') || session('new_flash')) { %>
  <!-- Latest version of Toastr JavaScript -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
  <%= javascript begin %>
    toastr.options = {
      closeButton: true,
      debug: false,
      positionClass: 'toast-top-full-width',
      onclick: null,
      showDuration: 300,
      hideDuration: 1000,
      timeOut: 5000,
      extendedTimeOut: 15000,
      showEasing: 'swing',
      hideEasing: 'linear',
      showMethod: 'fadeIn',
      hideMethod: 'fadeOut'
    }
    <%
    my $flash = { %{session('flash')||{}}, %{session('new_flash')||{}} };
    # remove logic from the template
    delete session->{flash}; delete session->{new_flash};
    for my $type (qw/warning success error/) {
      next unless $flash->{$type};
    %>
    toastr['<%= $type %>']('<%= $flash->{$type} %>', '<%= ucfirst($type) %>');
    <% } %>
  <% end %>
<% } %>
  <%= content 'javascript' %>
</body>
</html>
